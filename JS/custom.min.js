function fixedFormFieldsMessages() {
  $("form .field").remove();
  $("form ").find("[data-valmsg-summary=true]").remove();
}
function activateContactUsAjax() {
  var n = $("form#contact_us");
  n.each(function () {
    var n = $(this);
    n.find("button").click(function (n) {
      var i, t;
      if (
        (n.preventDefault(),
        (i = $(this)),
        (t = i.parents("form#contact_us")),
        showSendingButton(i, "sending..."),
        $.validator.unobtrusive.parse(t),
        t.validate(),
        t.valid())
      ) {
        var r = t.find("[name=Name]").val(),
          u = t.find("[name=Email]").val(),
          f = t.find("[name=Message]").val(),
          e = t.find("[name=g-recaptcha-response]").val(),
          o = t.find("[name=__RequestVerificationToken]").val(),
          s = t.attr("action");
        $.ajax({
          type: "POST",
          url: s,
          dataType: "json",
          data: {
            Name: r,
            Email: u,
            Message: f,
            "g-recaptcha-response": e,
            __RequestVerificationToken: o,
          },
          success: function (n) {
            n.isSuccessful &&
              n.status == "successful" &&
              (showModal(n.message, "success"),
              i.show(),
              i.parent().find(".fake-submit").remove());
            t[0].reset();
            grecaptcha.reset();
          },
          error: function (n) {
            var r =
              "Error occured. Please try to send your message to info@abukina.com using email.";
            n.isSuccessful || n.status != "sending email" || (r = n.message);
            n.isSuccessful || n.status != "validation" || (r = n.message);
            showModal(r, "danger");
            i.show();
            i.parent().find(".fake-submit").remove();
            grecaptcha.reset();
            t[0].reset();
          },
        });
      }
    });
  });
}
function showModal(n, t) {
  $(".modal-strip").remove();
  $(".body-inner").append(
    '<div class="modal-strip modal-top background-#type#">  <div class="container">     <div class="text-center p-10">#message#<a class="m-l-10 btn btn-light btn-close-modal">Close</a></div>  </div></div>'
      .replace("#message#", n)
      .replace("#type#", t)
  );
  setTimeout(function () {
    $(".modal-strip").addClass("modal-active");
  }, 100);
  $(".btn-close-modal").click(function () {
    $(".modal-strip").removeClass("modal-active");
    setTimeout(function () {
      $(".modal-strip").remove();
    }, 1e3);
  });
  setTimeout(function () {
    $(".modal-strip").removeClass("modal-active");
    setTimeout(function () {
      $(".modal-strip").remove();
    }, 1e3);
  }, 1e4);
}
function showSendingButton(n, t) {
  if (n != null) {
    t == null && (t = "sending...");
    n.hide();
    n.parent().find(".fake-submit").remove();
    n.parent().append(
      '<a href="" class="btn btn-primary fake-submit"><i class="fas fa-paper-plane"></i>&nbsp;#text#</a>'.replace(
        "#text#",
        t
      )
    );
  }
}
$(function () {
  fixedFormFieldsMessages();
  activateContactUsAjax();
});
